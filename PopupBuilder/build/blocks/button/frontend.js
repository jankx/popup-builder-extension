(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var s in o)e.o(o,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:o[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=function(e,t,o){let s=`${e}=${t}; path=/`;if(o){const e=new Date;e.setTime(e.getTime()+60*o*60*1e3),s+=`; expires=${e.toUTCString()}`}document.cookie=s},o=window.wp.apiFetch;var s=e.n(o);const n=(e,o)=>{e&&!function(e){const t=`; ${document.cookie}`.split(`; ${e}=`);return 2===t.length?t.pop().split(";").shift():null}(`pbb_conversion_${o}`)&&((e,t)=>{const o=Number(sessionStorage.getItem("pbb_logs"));location.search.includes("iframe=true")&&s()({path:"/pbb/v1/popup/logs",method:"PUT",data:{id:o,...e}}).then(e=>{t&&t(e)})})({converted:!0,refferer:window.parent.document.referrer},e=>{"success"===e.status?t(`pbb_conversion_${o}`,"true",8760):console.error("Error updating conversion count:",e.message)})},r=window.wp.hooks;window.addEventListener("load",()=>{const e=document.querySelectorAll(".pbb-btn"),o=()=>{const e=document.querySelector(".popup-builder-modal"),t=JSON.parse(e.getAttribute("data-settings"));((e,t)=>{let o=e.getAttribute("id");o=o.replace("popup-builder-","");const{entrAnimation:s,exitAnimation:n,animationDuration:r,type:i}=t||{},c=e.querySelector(".popup-builder-container");c.classList.remove(`${s}`),c.classList.add(`${n}`),c.classList.add("reverse"),setTimeout(()=>{["popup","full-screen"].includes(i)&&t?.preventScroll&&(window.parent.document.body.style.overflow=""),e.classList.remove("popup-builder-modal--open"),c.classList.remove(`${n}`),c.classList.remove("reverse"),window.frameElement&&window.frameElement.remove()},1e3*r)})(e,t)};for(const s of e){const e=JSON.parse(s.getAttribute("data-settings")),{istrackConversion:i,clickEvent:c,closeCampaign:p,step:a,cookies:l}=e||{};(["closeCampaign","openUrl","step","cookieConsent"].includes(c)||i)&&s.addEventListener("click",u=>{u.preventDefault();const d=s.closest(".popup-builder-modal"),m=d?.id.replace("popup-builder-","");if(n(i,m),"closeCampaign"===c&&p)o();else if("openUrl"===c){const e=s.getAttribute("href"),t=s.getAttribute("target");e&&window.top.open(e,t||"_self")}else if("step"===c&&a){const t=(0,r.applyFilters)("popupkit.steps.button",""),o=document.querySelectorAll(".wp-block-popup-builder-block-step");for(const e of o)e.classList.contains("active")&&e.classList.remove("active");const s=t[parseInt(a)];s.classList.add("active"),document.querySelector(".popupkit-steps-inner").insertBefore(s,o[parseInt(e.step)])}else if("cookieConsent"===c&&l){const e=JSON.parse(l);for(const o of e){const{name:e,value:s,expires:n}=o;e&&s&&t(e,s,24*n)}o()}})}})})();